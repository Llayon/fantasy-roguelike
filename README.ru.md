# Fantasy Roguelike Battle Simulator

[English](README.md) | **–†—É—Å—Å–∫–∏–π**

–ß–∏—Å—Ç—ã–π, –º–æ–¥—É–ª—å–Ω—ã–π —Å–∏–º—É–ª—è—Ç–æ—Ä –±–æ–µ–≤ –¥–ª—è roguelike –∞–≤—Ç–æ–±–∞—Ç–ª–µ—Ä–∞ —Å –¥–µ—Ç–µ—Ä–º–∏–Ω–∏—Ä–æ–≤–∞–Ω–Ω—ã–º –±–æ–µ–º, –ø—Ä–æ–¥–≤–∏–Ω—É—Ç—ã–º–∏ –º–µ—Ö–∞–Ω–∏–∫–∞–º–∏ –∏ –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã–º PvP.

## üéØ –û–±–∑–æ—Ä

–≠—Ç–æ—Ç —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π —Å–æ–¥–µ—Ä–∂–∏—Ç —Ä–µ—Ñ–∞–∫—Ç–æ—Ä–µ–Ω–Ω—ã–π —Å–∏–º—É–ª—è—Ç–æ—Ä –±–æ–µ–≤, —Ä–∞–∑—Ä–∞–±–æ—Ç–∞–Ω–Ω—ã–π –¥–ª—è roguelike —Ä–µ–∂–∏–º–∞. –û–Ω –æ–±—ä–µ–¥–∏–Ω—è–µ—Ç Core 1.0 (–±–∞–∑–æ–≤—ã–π –±–æ–π) —Å Core 2.0 (–ø—Ä–æ–¥–≤–∏–Ω—É—Ç—ã–µ –º–µ—Ö–∞–Ω–∏–∫–∏) –≤ –µ–¥–∏–Ω—É—é, –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º—É—é –∫–æ–¥–æ–≤—É—é –±–∞–∑—É.

### ‚ú® –ö–ª—é—á–µ–≤—ã–µ –æ—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏

- **–ï–¥–∏–Ω–∞—è Core –±–∏–±–ª–∏–æ—Ç–µ–∫–∞**: –ï–¥–∏–Ω—ã–π –∏—Å—Ç–æ—á–Ω–∏–∫ –∏—Å—Ç–∏–Ω—ã –¥–ª—è –≤—Å–µ—Ö –±–æ–µ–≤—ã—Ö –º–µ—Ö–∞–Ω–∏–∫
- **–ö–æ–º–ø–∞–∫—Ç–Ω—ã–π —Å–∏–º—É–ª—è—Ç–æ—Ä**: –û—Å–Ω–æ–≤–Ω–æ–π —Ü–∏–∫–ª —Å–∏–º—É–ª—è—Ü–∏–∏ –º–µ–Ω–µ–µ 500 —Å—Ç—Ä–æ–∫
- **–î–µ—Ç–µ—Ä–º–∏–Ω–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –±–æ–π**: –û–¥–∏–Ω–∞–∫–æ–≤—ã–µ –≤—Ö–æ–¥–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ + seed = –∏–¥–µ–Ω—Ç–∏—á–Ω—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç
- **14 –ø—Ä–æ–¥–≤–∏–Ω—É—Ç—ã—Ö –º–µ—Ö–∞–Ω–∏–∫**: Facing, flanking, riposte, charge, resolve, phalanx –∏ –¥—Ä—É–≥–∏–µ
- **Property-Based —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ**: 12 —Å–≤–æ–π—Å—Ç–≤ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ—Å—Ç–∏ —Å 100+ –∏—Ç–µ—Ä–∞—Ü–∏—è–º–∏ –∫–∞–∂–¥–æ–µ
- **–ê—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã–π PvP**: Matchmaking –Ω–∞ –æ—Å–Ω–æ–≤–µ —Å–Ω–∏–º–∫–æ–≤ —Å fallback –Ω–∞ –±–æ—Ç–æ–≤
- **–ß–∏—Å—Ç—ã–π API**: RESTful endpoints —Å–ø–µ—Ü–∏–∞–ª—å–Ω–æ –¥–ª—è roguelike flow

## üöÄ –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

```bash
# –ö–ª–æ–Ω–∏—Ä—É–π—Ç–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π
git clone https://github.com/YOUR_USERNAME/fantasy-roguelike.git
cd fantasy-roguelike

# –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
npm install

# –ó–∞–ø—É—Å—Ç–∏—Ç–µ PostgreSQL (Docker)
docker run --name fantasy-roguelike-db \
  -e POSTGRES_PASSWORD=postgres \
  -e POSTGRES_DB=fantasy_roguelike \
  -p 5432:5432 \
  -d postgres:14

# –ù–∞—Å—Ç—Ä–æ–π—Ç–µ –æ–∫—Ä—É–∂–µ–Ω–∏–µ
cp .env.example .env

# –ó–∞–ø—É—Å—Ç–∏—Ç–µ –º–∏–≥—Ä–∞—Ü–∏–∏
npm run migration:run

# –ó–∞–ø–æ–ª–Ω–∏—Ç–µ –±–∞–∑—É –±–æ—Ç–∞–º–∏
npm run seed:bots

# –ó–∞–ø—É—Å—Ç–∏—Ç–µ —Å–µ—Ä–≤–µ—Ä
npm run start:dev
```

–°–µ—Ä–≤–µ—Ä –∑–∞–ø—É—â–µ–Ω –Ω–∞ http://localhost:3000 üéâ

–ü–æ–¥—Ä–æ–±–Ω–µ–µ: [QUICK_START.md](QUICK_START.md)

## üìö –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

- **[README.md](README.md)** - –ü–æ–ª–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è (English)
- **[QUICK_START.md](QUICK_START.md)** - –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç
- **[docs/API.md](docs/API.md)** - API –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
- **[CONTRIBUTING.md](CONTRIBUTING.md)** - –ö–∞–∫ –≤–Ω–µ—Å—Ç–∏ –≤–∫–ª–∞–¥
- **[GITHUB_SETUP.md](GITHUB_SETUP.md)** - –ù–∞—Å—Ç—Ä–æ–π–∫–∞ GitHub —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è

## üéÆ –ë–æ–µ–≤—ã–µ –º–µ—Ö–∞–Ω–∏–∫–∏

### –ü–æ—Ä—è–¥–æ–∫ —Ñ–∞–∑ –±–æ—è

–ö–∞–∂–¥—ã–π —Ö–æ–¥ —é–Ω–∏—Ç–∞ —Å–ª–µ–¥—É–µ—Ç —Å—Ç—Ä–æ–≥–æ–º—É –ø–æ—Ä—è–¥–∫—É —Ñ–∞–∑:

1. **turn_start**: –†–µ–≥–µ–Ω–µ—Ä–∞—Ü–∏—è resolve, —Å–±—Ä–æ—Å riposte –∑–∞—Ä—è–¥–æ–≤
2. **ai_decision**: –ò–ò –≤—ã–±–∏—Ä–∞–µ—Ç –¥–µ–π—Å—Ç–≤–∏–µ
3. **movement**: –ü–µ—Ä–µ–º–µ—â–µ–Ω–∏–µ, –ø—Ä–æ–≤–µ—Ä–∫–∞ intercept
4. **pre_attack**: –ü–æ–≤–æ—Ä–æ—Ç facing, —Ä–∞—Å—á–µ—Ç flanking
5. **attack**: –†–∞—Å—á–µ—Ç —É—Ä–æ–Ω–∞, dodge, riposte
6. **post_attack**: –ü—Ä–∏–º–µ–Ω–µ–Ω–∏–µ armor shred, —Ä–∞—Å—Ö–æ–¥ ammo
7. **turn_end**: –†–∞—Å–ø—Ä–æ—Å—Ç—Ä–∞–Ω–µ–Ω–∏–µ contagion, decay shred

### 14 –ø—Ä–æ–¥–≤–∏–Ω—É—Ç—ã—Ö –º–µ—Ö–∞–Ω–∏–∫ (Core 2.0)

| Tier | –ú–µ—Ö–∞–Ω–∏–∫–∞ | –û–ø–∏—Å–∞–Ω–∏–µ |
|------|----------|----------|
| 0 | **Facing** | –Æ–Ω–∏—Ç—ã —Å–º–æ—Ç—Ä—è—Ç –≤ –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–∏ N/S/E/W |
| 1 | **Resolve** | –°–∏—Å—Ç–µ–º–∞ –º–æ—Ä–∞–ª–∏, routing –ø—Ä–∏ 0 resolve |
| 1 | **Engagement** | –ó–æ–Ω–∞ –∫–æ–Ω—Ç—Ä–æ–ª—è, –∞—Ç–∞–∫–∞ –ø—Ä–∏ –æ—Ç—Å—Ç—É–ø–ª–µ–Ω–∏–∏ |
| 1 | **Flanking** | +15% —É—Ä–æ–Ω–∞ —Å —Ñ–ª–∞–Ω–≥–∞, +30% —Å —Ç—ã–ª–∞ |
| 2 | **Riposte** | 30% —à–∞–Ω—Å –∫–æ–Ω—Ç—Ä–∞—Ç–∞–∫–∏ —Å–ø–µ—Ä–µ–¥–∏ |
| 2 | **Intercept** | –ö–æ–ø–µ–π—â–∏–∫–∏ –æ—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞—é—Ç –∫–∞–≤–∞–ª–µ—Ä–∏—é |
| 2 | **Aura** | –ü–∞—Å—Å–∏–≤–Ω—ã–µ —ç—Ñ—Ñ–µ–∫—Ç—ã –Ω–∞ —Å–æ—é–∑–Ω–∏–∫–æ–≤ |
| 3 | **Charge** | +10% —É—Ä–æ–Ω–∞ –∑–∞ –∫–ª–µ—Ç–∫—É –¥–≤–∏–∂–µ–Ω–∏—è (–º–∞–∫—Å 5) |
| 3 | **Overwatch** | –ü—Ä–æ–ø—É—Å–∫ —Ö–æ–¥–∞ –¥–ª—è –∞—Ç–∞–∫–∏ –¥–≤–∏–∂—É—â–∏—Ö—Å—è |
| 3 | **Phalanx** | +2 –±—Ä–æ–Ω–∏ –∑–∞ –∫–∞–∂–¥–æ–≥–æ —Å–æ—Å–µ–¥–Ω–µ–≥–æ —Å–æ—é–∑–Ω–∏–∫–∞ |
| 3 | **Line of Sight** | –î–∞–ª—å–Ω–∏–µ –∞—Ç–∞–∫–∏ –±–ª–æ–∫–∏—Ä—É—é—Ç—Å—è —é–Ω–∏—Ç–∞–º–∏ |
| 3 | **Ammunition** | –î–∞–ª—å–Ω–æ–±–æ–π–Ω—ã–µ —é–Ω–∏—Ç—ã –∏–º–µ—é—Ç –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–Ω—ã–µ –±–æ–µ–ø—Ä–∏–ø–∞—Å—ã |
| 4 | **Contagion** | –°—Ç–∞—Ç—É—Å —ç—Ñ—Ñ–µ–∫—Ç—ã —Ä–∞—Å–ø—Ä–æ—Å—Ç—Ä–∞–Ω—è—é—Ç—Å—è –Ω–∞ —Å–æ—Å–µ–¥–µ–π |
| 4 | **Armor Shred** | –ë—Ä–æ–Ω—è –¥–µ–≥—Ä–∞–¥–∏—Ä—É–µ—Ç —Å –∫–∞–∂–¥—ã–º —É–¥–∞—Ä–æ–º |

## üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

```bash
# –í—Å–µ —Ç–µ—Å—Ç—ã
npm test

# Unit —Ç–µ—Å—Ç—ã
npm run test:unit

# Property-based —Ç–µ—Å—Ç—ã
npm run test:property

# –° coverage
npm run test:cov
```

### Property-Based —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

–ú—ã –∏—Å–ø–æ–ª—å–∑—É–µ–º [fast-check](https://github.com/dubzzz/fast-check) –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ —Å–≤–æ–π—Å—Ç–≤ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ—Å—Ç–∏:

- ‚úÖ –ú–µ—Ä—Ç–≤—ã–µ —é–Ω–∏—Ç—ã –Ω–∏–∫–æ–≥–¥–∞ –Ω–µ –¥–µ–π—Å—Ç–≤—É—é—Ç
- ‚úÖ HP –Ω–∏–∫–æ–≥–¥–∞ –Ω–µ –ø—Ä–µ–≤—ã—à–∞–µ—Ç maxHp
- ‚úÖ Ammunition –Ω–∏–∫–æ–≥–¥–∞ –Ω–µ —Å—Ç–∞–Ω–æ–≤–∏—Ç—Å—è –æ—Ç—Ä–∏—Ü–∞—Ç–µ–ª—å–Ω—ã–º
- ‚úÖ Facing –≤—Å–µ–≥–¥–∞ –≤–∞–ª–∏–¥–µ–Ω (N, S, E, W)
- ‚úÖ –ë–æ–π –≤—Å–µ–≥–¥–∞ –∑–∞–≤–µ—Ä—à–∞–µ—Ç—Å—è –≤ –ø—Ä–µ–¥–µ–ª–∞—Ö MAX_ROUNDS
- –ò –µ—â–µ 7 —Å–≤–æ–π—Å—Ç–≤...

## üõ†Ô∏è –¢–µ—Ö–Ω–æ–ª–æ–≥–∏–∏

| –°–ª–æ–π | –¢–µ—Ö–Ω–æ–ª–æ–≥–∏—è | –í–µ—Ä—Å–∏—è |
|------|------------|--------|
| Runtime | Node.js | 18+ |
| Framework | NestJS | 10.x |
| –Ø–∑—ã–∫ | TypeScript | 5.x |
| –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö | PostgreSQL | 14+ |
| ORM | TypeORM | 0.3.x |
| –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ | Jest | 29.x |
| Property Testing | fast-check | 3.x |

## üìÅ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

```
src/
‚îú‚îÄ‚îÄ core/           # –ü–µ—Ä–µ–∏—Å–ø–æ–ª—å–∑—É–µ–º–∞—è –±–∏–±–ª–∏–æ—Ç–µ–∫–∞ (game-agnostic)
‚îÇ   ‚îú‚îÄ‚îÄ grid/       # –£—Ç–∏–ª–∏—Ç—ã —Å–µ—Ç–∫–∏, A* pathfinding
‚îÇ   ‚îú‚îÄ‚îÄ battle/     # –†–∞—Å—á–µ—Ç—ã –±–æ—è (—É—Ä–æ–Ω, –ø–æ—Ä—è–¥–æ–∫ —Ö–æ–¥–æ–≤)
‚îÇ   ‚îú‚îÄ‚îÄ mechanics/  # 14 –º–æ–¥—É–ª—å–Ω—ã—Ö –º–µ—Ö–∞–Ω–∏–∫
‚îÇ   ‚îî‚îÄ‚îÄ utils/      # Seeded random, state helpers
‚îú‚îÄ‚îÄ simulator/      # –°–∏–º—É–ª—è—Ç–æ—Ä –±–æ—è (<500 —Å—Ç—Ä–æ–∫)
‚îÇ   ‚îú‚îÄ‚îÄ simulator.ts    # –û—Å–Ω–æ–≤–Ω–æ–π —Ü–∏–∫–ª
‚îÇ   ‚îú‚îÄ‚îÄ turn.ts         # –í—ã–ø–æ–ª–Ω–µ–Ω–∏–µ —Ö–æ–¥–∞
‚îÇ   ‚îî‚îÄ‚îÄ phases/         # –û–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ —Ñ–∞–∑
‚îú‚îÄ‚îÄ roguelike/      # –õ–æ–≥–∏–∫–∞ roguelike —Ä–µ–∂–∏–º–∞
‚îÇ   ‚îú‚îÄ‚îÄ run/        # –ü—Ä–æ–≥—Ä–µ—Å—Å–∏—è run
‚îÇ   ‚îú‚îÄ‚îÄ draft/      # –°–∏—Å—Ç–µ–º–∞ –¥—Ä–∞—Ñ—Ç–∞
‚îÇ   ‚îî‚îÄ‚îÄ matchmaking/# –ü–æ–∏—Å–∫ –ø—Ä–æ—Ç–∏–≤–Ω–∏–∫–∞
‚îú‚îÄ‚îÄ game/           # –ò–≥—Ä–æ–≤–æ–π –∫–æ–Ω—Ç–µ–Ω—Ç
‚îÇ   ‚îú‚îÄ‚îÄ units/      # –û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è —é–Ω–∏—Ç–æ–≤
‚îÇ   ‚îî‚îÄ‚îÄ abilities/  # –î–∞–Ω–Ω—ã–µ —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–µ–π
‚îî‚îÄ‚îÄ api/            # REST API (NestJS)
    ‚îú‚îÄ‚îÄ run/        # Run endpoints
    ‚îú‚îÄ‚îÄ battle/     # Battle endpoints
    ‚îî‚îÄ‚îÄ draft/      # Draft endpoints
```

## ü§ù –í–∫–ª–∞–¥ –≤ –ø—Ä–æ–µ–∫—Ç

–ú—ã –ø—Ä–∏–≤–µ—Ç—Å—Ç–≤—É–µ–º –≤–∫–ª–∞–¥! –ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –ø—Ä–æ—á–∏—Ç–∞–π—Ç–µ [CONTRIBUTING.md](CONTRIBUTING.md) –ø–µ—Ä–µ–¥ –æ—Ç–ø—Ä–∞–≤–∫–æ–π PR.

### –ë—ã—Å—Ç—Ä—ã–π –ø—Ä–æ—Ü–µ—Å—Å

1. Fork —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è
2. –°–æ–∑–¥–∞–π—Ç–µ –≤–µ—Ç–∫—É: `git checkout -b feature/my-feature`
3. –í–Ω–µ—Å–∏—Ç–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è –∏ –¥–æ–±–∞–≤—å—Ç–µ —Ç–µ—Å—Ç—ã
4. –ó–∞–ø—É—Å—Ç–∏—Ç–µ —Ç–µ—Å—Ç—ã: `npm test`
5. Commit: `git commit -m "feat: add my feature"`
6. Push: `git push origin feature/my-feature`
7. –°–æ–∑–¥–∞–π—Ç–µ Pull Request

## üìÑ –õ–∏—Ü–µ–Ω–∑–∏—è

MIT License - —Å–º. [LICENSE](LICENSE)

## üîó –°—Å—ã–ª–∫–∏

- **–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è**: [docs/](docs/)
- **Issues**: [GitHub Issues](https://github.com/YOUR_USERNAME/fantasy-roguelike/issues)
- **Discussions**: [GitHub Discussions](https://github.com/YOUR_USERNAME/fantasy-roguelike/discussions)

## üôè –ë–ª–∞–≥–æ–¥–∞—Ä–Ω–æ—Å—Ç–∏

–≠—Ç–æ—Ç –ø—Ä–æ–µ–∫—Ç —è–≤–ª—è–µ—Ç—Å—è —Ä–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥–æ–º —Å–∏–º—É–ª—è—Ç–æ—Ä–∞ –±–æ–µ–≤ –∏–∑ [fantasy-autobattler](https://github.com/YOUR_USERNAME/fantasy-autobattler).

---

–°–¥–µ–ª–∞–Ω–æ —Å ‚ù§Ô∏è –¥–ª—è roguelike —Å–æ–æ–±—â–µ—Å—Ç–≤–∞
